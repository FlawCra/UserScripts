// ==UserScript==
// @name        asset.party key chance
// @namespace   https://flawcra.cc/
// @match       https://asset.party/*
// @grant       GM_getValue
// @version     1.0.2-GitHub
// @author      FlawCra
// @icon        https://www.google.com/s2/favicons?domain=asset.party
// @license     Apache License 2.0
// @description A simple script to view how unlikely you are to get an s&box key.
// ==/UserScript==
let oldChance = 0;
const hitmarker = GM_getValue("hitmarker");
if(!hitmarker) hitmarker = false;
setInterval(() => {
  if(location.href.includes("/get/developer/preview")) {

    const tags = document.getElementsByClassName("tag");
    let parent = tags[tags.length-1].parentElement;
    test = tags[tags.length-3].innerText;
    test = test.replace("people\n","");
    test2 = "";
    if(tags.length > 4) {
      test2 = tags[tags.length-5].innerText;
    }

    test2 = test2.replace("key\n","");
    chance = (parseInt(test2)/parseInt(test))*100;
    if(Number.isNaN(chance)) {
        let span = document.createElement("span");
        span.classList.add("tag");
        span.setAttribute("title", "Chance in Percent");
        span.innerHTML = `<i>key</i>0 %`;
        parent.appendChild(span);
        return;
    }
    chance = Math.round((chance + Number.EPSILON) * 100) / 100
    tags[tags.length-1].innerHTML = `<i>key</i>${chance} %`;
    if(chance < oldChance && hitmarker) {
      var audio = new Audio("data:audio/mpeg;base64,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VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy4xMDBVVVVVVf/7YGTzgPSZY057Bh1gAAANIAAAAQcEfRdBhNYAAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EGTmj/CNAMOIAAAEAAANIAAAAQAAAf4AAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQZN2P8AAAf4AAAAgAAA0gAAABAAAB/gAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xBk3Y/wAAB/gAAACAAADSAAAAEAAAH+AAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EGTdj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQZN2P8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xBk3Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EGTdj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQZN2P8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xBk3Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==");
      audio.play();
    }
    oldChance = chance;
  }
}, 150);
